{{ define "draggable" }}
<div id="draggable">
	<div id="draggableHeader">
		<p>hello</p>
		<p>hello</p>
		<p>hello</p>
	</div>
</div>
<style>
#draggable{
	position: absolute;
	border: 1px solid red;
}
#draggableHeader{
	padding: 10px;
	border: 1px solid red;
	background-color: blue;
}
</style>
<script>
	const draggableElement = document.getElementById("draggable");	
	const parentNode = draggableElement.parentNode;
	const rect = parentNode.getBoundingClientRect();
	console.log(draggableElement)
	dragElement(draggableElement);

	function dragElement(elmnt){
		let pos1 = 0;
		let pos2 = 0;
		let pos3 = 0;
		let pos4 = 0;
		if (document.getElementById(elmnt.id + "header")) {
			// if present, the header is where you move the DIV from:
			document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
			} else {
			// otherwise, move the DIV from anywhere inside the DIV:
			elmnt.onmousedown = dragMouseDown;
		}

		function dragMouseDown(e){
			console.log("mouseDown")
			e = e || window.event;
			e.preventDefault();
			pos3 = e.clientX;
			pos4 = e.clientY;
			document.onmouseup = closeDragElement;
			document.onmousemove = elementDrag;
		}

		function elementDrag(e){
			console.log("dragging")
			e = e || window.event;
			e.preventDefault();
			console.log("clientX",e.clientX)
			console.log("rect.left",rect.left)
			if(checkBounds(e, rect)){
				pos1 = pos3 - e.clientX;
				pos2 = pos4 - e.clientY;
				pos3 = e.clientX;
				pos4 = e.clientY;
				elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
				elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
			}
		}

		function closeDragElement(){
			console.log("dragEnd")
			document.onmousemove = null;
			document.onmouseup = null;
		}
	}
	function checkBounds(event, container){
		let isInBounds = true;
		if(event.clientX >= rect.right || event.clientX <= rect.left){
			isInBounds = false;
		}
		if(event.clientY <= rect.top || event.clienty >= rect.bottom){
			isInBounds = false;
		}
		return isInBounds;
	}
	
</script>
{{ end }}

